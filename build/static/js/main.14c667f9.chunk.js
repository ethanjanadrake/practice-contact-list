(this["webpackJsonppractice-contact-list"]=this["webpackJsonppractice-contact-list"]||[]).push([[0],{180:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(31),n=a.n(s),r=a(29),i=a.n(r),l=a(39),o=a(20),j=a(54),m=a(47);a(88),a(181);m.a.initializeApp({apiKey:"AIzaSyAi2X6R2sYpAfFa2O9gPX_J04107naHYTM",authDomain:"practice-contact-list.firebaseapp.com",databaseURL:"https://practice-contact-list-default-rtdb.firebaseio.com",projectId:"practice-contact-list",storageBucket:"practice-contact-list.appspot.com",messagingSenderId:"473645827389",appId:"1:473645827389:web:abd3068e5de9e5d07df154",measurementId:"G-P9DT8WWE12"});var u=m.a.auth(),b=function(){var e=new m.a.auth.GoogleAuthProvider;u.signInWithPopup(e).then((function(e){})).catch((function(e){console.error(e)}))},d=m.a,O=a(2),f=Object(c.createContext)();function x(){return Object(c.useContext)(f)}var h=function(e){var t=Object(c.useState)(null),a=Object(o.a)(t,2),s=a[0],n=a[1];Object(c.useEffect)((function(){return u.onAuthStateChanged(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var r={currentUser:s,logout:function(){return u.signOut()}};return Object(O.jsx)(f.Provider,{value:r,children:e.children})},p=a(21),N=a(36),v=a(82),g=a(64),L=a(40);var y=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=(t[0],t[1]),s=x(),n=s.currentUser,r=s.logout;function m(){return(m=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(""),e.prev=1,e.next=4,r();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),a("Failed to log out");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return Object(O.jsx)(L.a,{className:"my-3",children:Object(O.jsxs)(v.a,{className:"d-flex justify-content-between",children:[Object(O.jsxs)(g.a.Item,{className:"d-flex align-items-center",children:[Object(O.jsx)(j.b,{to:"/home",children:Object(O.jsx)(p.a,{className:"btn-dark",children:Object(O.jsx)("i",{className:"fas fa-dragon"})})}),Object(O.jsx)("h1",{className:"d-inline-block mx-3 my-0",children:"Contact List"})]}),Object(O.jsxs)(g.a.Item,{className:"d-flex align-items-center",children:[Object(O.jsx)("h5",{className:"d-inline-block mx-3 my-0",children:n&&n.email}),Object(O.jsxs)(N.a,{children:[Object(O.jsxs)(p.a,{onClick:b,children:[Object(O.jsx)("i",{className:"fab fa-google"})," ",Object(O.jsx)("i",{className:"fas fa-sign-in-alt"})]}),n&&Object(O.jsx)(p.a,{onClick:function(){return m.apply(this,arguments)},className:"btn-secondary",children:Object(O.jsx)("i",{className:"fas fa-sign-out-alt"})})]})]})]})})},C=a(13),F=(a(100),a(35)),w=a(81),k=a.n(w),S=a(46),I=a(12),E=a(63);function G(e){var t=d.firestore().collection("contacts"),a=x().currentUser,s=Object(c.useState)(!1),n=Object(o.a)(s,2),r=n[0],i=n[1],l=Object(c.useState)(e.nameFirst),j=Object(o.a)(l,2),m=j[0],u=j[1],b=Object(c.useState)(e.nameLast),f=Object(o.a)(b,2),h=f[0],v=f[1],g=Object(c.useState)(e.email),y=Object(o.a)(g,2),C=y[0],F=y[1];return Object(O.jsx)(L.a,{className:"mt-3",children:Object(O.jsxs)(S.a,{className:"p-2",children:[!r&&Object(O.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{children:[e.nameFirst," ",e.nameLast]}),Object(O.jsx)("div",{children:e.email})]}),Object(O.jsx)("div",{className:"ml-3",children:a&&Object(O.jsxs)(N.a,{children:[Object(O.jsx)(p.a,{onClick:function(){i(!0)},children:Object(O.jsx)("i",{className:"fas fa-user-edit"})}),Object(O.jsx)(p.a,{onClick:function(){return a=e.id,void t.doc(a).delete().catch((function(e){return console.error(e)}));var a},className:"btn-danger",children:Object(O.jsx)("i",{className:"fas fa-user-slash"})})]})})]}),r&&Object(O.jsxs)(I.a,{onSubmit:function(a){a.preventDefault(),t.doc(e.id).set({nameFirst:m,nameLast:h,email:C}).catch((function(e){return console.error(e)})),i(!1)},className:"p-3 container",children:[Object(O.jsxs)(E.a,{children:[Object(O.jsxs)(I.a.Group,{className:"p-3 col",children:[Object(O.jsx)(I.a.Label,{children:"First Name"}),Object(O.jsx)(I.a.Control,{type:"text",placeholder:"Name",value:m,onChange:function(e){return u(e.target.value)}})]}),Object(O.jsxs)(I.a.Group,{className:"p-3 col",children:[Object(O.jsx)(I.a.Label,{children:"Last Name"}),Object(O.jsx)(I.a.Control,{type:"text",placeholder:"Name",value:h,onChange:function(e){return v(e.target.value)}})]})]}),Object(O.jsx)(E.a,{children:Object(O.jsxs)(I.a.Group,{className:"p-3 pt-0",children:[Object(O.jsx)(I.a.Label,{children:"Email"}),Object(O.jsx)(I.a.Control,{type:"email",placeholder:"Email",value:C,onChange:function(e){return F(e.target.value)}})]})}),Object(O.jsx)("div",{className:"d-flex p-3 justify-content-end",children:Object(O.jsxs)(N.a,{children:[Object(O.jsx)(p.a,{className:"btn-secondary",onClick:function(){i(!1),u(e.nameFirst),v(e.nameLast),F(e.email)},children:Object(O.jsx)("i",{className:"fas fa-window-close"})}),Object(O.jsx)(p.a,{type:"submit",className:"btn-success",children:Object(O.jsx)("i",{className:"fas fa-user-check"})})]})})]})]})})}var A=a(34);function D(e){var t=d.firestore().collection("contacts"),a=x().currentUser,s=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null),j=Object(c.useState)({nameFirst:"",nameLast:"",email:""}),m=Object(o.a)(j,2),u=m[0],b=m[1],f=Object(c.useState)({nameFirst:"",nameLast:"",email:""}),h=Object(o.a)(f,2),v=h[0],g=h[1],y=Object(c.useState)([]),C=Object(o.a)(y,2),w=C[0],E=C[1],D=Object(c.useState)("timestamp"),P=Object(o.a)(D,2),R=P[0],T=P[1],U=Object(c.useState)(!0),z=Object(o.a)(U,2),J=z[0],M=z[1];Object(c.useEffect)((function(){console.log("effect ran"),function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data();a.id=e.id,t.push(a)})),E(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var W=function(e){return u[e].length>0?"":"Missing Input"},B=function(e){console.log("sorting");var t=[];for(var a in e)t.push(Object(F.a)({},e[a]));return 0===t.length?t:J?"string"===typeof t[0][R]?t.sort((function(e,t){return e[R].toLowerCase()>t[R].toLowerCase()?1:-1})):t.sort((function(e,t){return e[R]>t[R]?1:-1})):"string"===typeof t[0][R]?t.sort((function(e,t){return e[R].toLowerCase()<t[R].toLowerCase()?1:-1})):t.sort((function(e,t){return e[R]<t[R]?1:-1}))}(w).map((function(e){return Object(O.jsx)(G,{id:e.id,email:e.email,nameFirst:e.nameFirst,nameLast:e.nameLast,timestamp:e.timestamp},e.id)}));return Object(O.jsxs)(L.a,{children:[a&&Object(O.jsx)(S.a,{className:"container",children:Object(O.jsxs)(I.a,{onSubmit:function(e){e.preventDefault(),function(){var e={};return e.nameFirst=W("nameFirst"),e.nameLast=W("nameLast"),k.a.isEmail(u.email)?e.email="":e.email="Invalid Email Address",g({nameFirst:e.nameFirst,nameLast:e.nameLast,email:e.email}),console.log(v),""===v.nameFirst&&""===v.nameLast&&""===v.email}()&&(t.doc().set({nameFirst:u.nameFirst,nameLast:u.nameLast,email:u.email,timestamp:(new Date).getTime()}).catch((function(e){console.error(e)})),b({nameFirst:"",nameLast:"",email:""}),s.current.value="",n.current.value="",r.current.value="")},className:"p-3",children:[Object(O.jsxs)("div",{className:"row p-3",children:[Object(O.jsxs)(I.a.Group,{className:"col",children:[Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)(I.a.Label,{children:"First Name"}),Object(O.jsx)("p",{className:"text-danger",children:v.nameFirst})]}),Object(O.jsx)(I.a.Control,{className:"".concat(""===v.nameFirst?"":"is-invalid"),ref:s,type:"text",placeholder:"First Name",onChange:function(e){return b(Object(F.a)(Object(F.a)({},u),{},{nameFirst:e.target.value}))}})]}),Object(O.jsxs)(I.a.Group,{className:"col",children:[Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)(I.a.Label,{children:"Last Name"}),Object(O.jsx)("p",{className:"text-danger",children:v.nameLast})]}),Object(O.jsx)(I.a.Control,{className:"".concat(""===v.nameLast?"":"is-invalid"),ref:n,type:"text",placeholder:"First Name",onChange:function(e){return b(Object(F.a)(Object(F.a)({},u),{},{nameLast:e.target.value}))}})]})]}),Object(O.jsx)("div",{className:"row p-3 pt-0",children:Object(O.jsxs)(I.a.Group,{className:"pt-0",children:[Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)(I.a.Label,{children:"Email"}),Object(O.jsx)("p",{className:"text-danger",children:v.email})]}),Object(O.jsx)(I.a.Control,{className:"".concat(""===v.email?"":"is-invalid"),ref:r,type:"email",placeholder:"Email",onChange:function(e){return b(Object(F.a)(Object(F.a)({},u),{},{email:e.target.value}))}})]})}),Object(O.jsx)("div",{className:"d-flex p-3 justify-content-end",children:Object(O.jsx)(p.a,{type:"submit",className:"btn-success",children:Object(O.jsx)("i",{className:"fas fa-user-plus"})})})]})}),Object(O.jsxs)(S.a,{className:"mt-5 pb-3",children:[!a&&Object(O.jsx)("p",{className:"m-4 mb-0 text-muted",children:"Log in with Google to edit Contact List"}),Object(O.jsx)("div",{className:"m-4 mb-0 d-flex justify-content-end",children:Object(O.jsxs)(A.a,{as:N.a,children:[Object(O.jsxs)(p.a,{className:"btn-secondary btn-sm",onClick:function(){M(!J)},children:[J&&Object(O.jsx)("i",{className:"fas fa-sort-up"}),!J&&Object(O.jsx)("i",{className:"fas fa-sort-down"})]}),Object(O.jsxs)(A.a.Toggle,{split:!0,variant:"info",children:["Sort ",Object(O.jsxs)("span",{className:"text-capitalize",children:[R," "]})]}),Object(O.jsxs)(A.a.Menu,{children:[Object(O.jsx)(A.a.Item,{onClick:function(){T("timestamp")},children:"Timestamp"}),Object(O.jsx)(A.a.Item,{onClick:function(){T("nameFirst")},children:"First Name"}),Object(O.jsx)(A.a.Item,{onClick:function(){T("nameLast")},children:"Last Name"}),Object(O.jsx)(A.a.Item,{onClick:function(){T("email")},children:"Email"})]})]})}),Object(O.jsx)("div",{className:"p-2",children:B})]})]})}var P=function(){return Object(O.jsx)(j.a,{children:Object(O.jsxs)(h,{children:[Object(O.jsx)(y,{}),Object(O.jsx)(D,{}),Object(O.jsx)(C.c,{children:Object(O.jsx)(C.a,{path:"/home",exact:!0})})]})})};n.a.render(Object(O.jsx)(P,{}),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.14c667f9.chunk.js.map