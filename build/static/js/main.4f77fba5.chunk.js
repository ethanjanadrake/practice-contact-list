(this.webpackJsonppractice-contact-list=this.webpackJsonppractice-contact-list||[]).push([[0],{177:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(30),n=c.n(s),i=c(40),r=c.n(i),l=c(49),j=c(18),o=c(53),u=c(45);c(85),c(178);u.a.initializeApp({apiKey:"AIzaSyAi2X6R2sYpAfFa2O9gPX_J04107naHYTM",authDomain:"practice-contact-list.firebaseapp.com",databaseURL:"https://practice-contact-list-default-rtdb.firebaseio.com",projectId:"practice-contact-list",storageBucket:"practice-contact-list.appspot.com",messagingSenderId:"473645827389",appId:"1:473645827389:web:abd3068e5de9e5d07df154",measurementId:"G-P9DT8WWE12"});var b=u.a.auth(),d=function(){var e=new u.a.auth.GoogleAuthProvider;b.signInWithPopup(e).then((function(e){})).catch((function(e){console.error(e)}))},m=u.a,O=c(2),f=Object(a.createContext)();function h(){return Object(a.useContext)(f)}var x=function(e){var t=Object(a.useState)(null),c=Object(j.a)(t,2),s=c[0],n=c[1];Object(a.useEffect)((function(){return b.onAuthStateChanged(function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var i={currentUser:s,logout:function(){return b.signOut()}};return Object(O.jsx)(f.Provider,{value:i,children:e.children})},p=c(21),N=c(33),v=c(79),g=c(61),y=c(37);var C=function(){var e=Object(a.useState)(""),t=Object(j.a)(e,2),c=(t[0],t[1]),s=h(),n=s.currentUser,i=s.logout;function u(){return(u=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(""),e.prev=1,e.next=4,i();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),c("Failed to log out");case 9:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return Object(O.jsx)(y.a,{className:"my-3",children:Object(O.jsxs)(v.a,{className:"d-flex justify-content-between",children:[Object(O.jsxs)(g.a.Item,{className:"d-flex align-items-center",children:[Object(O.jsx)(o.b,{to:"/home",children:Object(O.jsx)(p.a,{className:"btn-dark",children:Object(O.jsx)("i",{className:"fas fa-dragon"})})}),Object(O.jsx)("h1",{className:"d-inline-block mx-3 my-0",children:"Contact List"})]}),Object(O.jsxs)(g.a.Item,{className:"d-flex align-items-center",children:[Object(O.jsx)("h5",{className:"d-inline-block mx-3 my-0",children:n&&n.email}),Object(O.jsxs)(N.a,{children:[Object(O.jsxs)(p.a,{onClick:d,children:[Object(O.jsx)("i",{className:"fab fa-google"})," ",Object(O.jsx)("i",{className:"fas fa-sign-in-alt"})]}),n&&Object(O.jsx)(p.a,{onClick:function(){return u.apply(this,arguments)},className:"btn-secondary",children:Object(O.jsx)("i",{className:"fas fa-sign-out-alt"})})]})]})]})})},w=c(12),k=(c(97),c(78)),S=c.n(k),I=c(44),E=c(20);function L(e){var t=m.firestore().collection("contacts"),c=h().currentUser,s=Object(a.useState)(!1),n=Object(j.a)(s,2),i=n[0],r=n[1],l=Object(a.useState)(e.name),o=Object(j.a)(l,2),u=o[0],b=o[1],d=Object(a.useState)(e.email),f=Object(j.a)(d,2),x=f[0],v=f[1];return Object(O.jsx)(y.a,{className:"mt-3",children:Object(O.jsxs)(I.a,{className:"p-2",children:[!i&&Object(O.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:e.name}),Object(O.jsx)("div",{children:e.email})]}),Object(O.jsx)("div",{className:"ml-3",children:c&&Object(O.jsxs)(N.a,{children:[Object(O.jsx)(p.a,{onClick:function(){r(!0)},children:Object(O.jsx)("i",{className:"fas fa-user-edit"})}),Object(O.jsx)(p.a,{onClick:function(){return c=e.id,void t.doc(c).delete().catch((function(e){return console.error(e)}));var c},className:"btn-danger",children:Object(O.jsx)("i",{className:"fas fa-user-slash"})})]})})]}),i&&Object(O.jsxs)(E.a,{onSubmit:function(c){c.preventDefault(),t.doc(e.id).set({name:u,email:x}).catch((function(e){return console.error(e)})),r(!1)},className:"p-3",children:[Object(O.jsxs)(E.a.Group,{className:"p-3",children:[Object(O.jsx)(E.a.Label,{children:"Name"}),Object(O.jsx)(E.a.Control,{type:"text",placeholder:"Name",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(O.jsxs)(E.a.Group,{className:"p-3 pt-0",children:[Object(O.jsx)(E.a.Label,{children:"Email"}),Object(O.jsx)(E.a.Control,{type:"email",placeholder:"Email",value:x,onChange:function(e){return v(e.target.value)}})]}),Object(O.jsx)("div",{className:"d-flex p-3 justify-content-end",children:Object(O.jsxs)(N.a,{children:[Object(O.jsx)(p.a,{className:"btn-secondary",onClick:function(){r(!1),b(e.name),v(e.email)},children:Object(O.jsx)("i",{className:"fas fa-window-close"})}),Object(O.jsx)(p.a,{type:"submit",className:"btn-success",children:Object(O.jsx)("i",{className:"fas fa-user-check"})})]})})]})]})})}var A=c(35);function G(e){var t=m.firestore().collection("contacts"),c=h().currentUser,s=Object(a.useRef)(null),n=Object(a.useRef)(null),i=Object(a.useState)(""),r=Object(j.a)(i,2),l=r[0],o=r[1],u=Object(a.useState)(""),b=Object(j.a)(u,2),d=b[0],f=b[1],x=Object(a.useState)(""),v=Object(j.a)(x,2),g=v[0],C=v[1],w=Object(a.useState)(""),k=Object(j.a)(w,2),G=k[0],P=k[1],D=Object(a.useState)([]),T=Object(j.a)(D,2),U=T[0],R=T[1],z=Object(a.useState)("timestamp"),J=Object(j.a)(z,2),W=J[0],B=J[1],F=Object(a.useState)(!0),M=Object(j.a)(F,2),X=M[0],Y=M[1];Object(a.useEffect)((function(){console.log("effect ran"),t.onSnapshot((function(e){var t=[];e.forEach((function(e){var c=e.data();c.id=e.id,t.push(c)})),R(t)}))}),[]);var H=function(){var e=l.length>0?(C(""),!0):(C("Please type a name here"),!1),t=S.a.isEmail(d)?(P(""),!0):(P("Invalid Email Address"),!1);return!(!e||!t)},K=(X?U.sort((function(e,t){return e[W]>t[W]?1:-1})):U.sort((function(e,t){return e[W]<t[W]?1:-1}))).map((function(e){return Object(O.jsx)(L,{id:e.id,email:e.email,name:e.name,timestamp:e.timestamp},e.id)}));return Object(O.jsxs)(y.a,{children:[c&&Object(O.jsx)(I.a,{children:Object(O.jsxs)(E.a,{onSubmit:function(e){e.preventDefault(),H()&&(t.doc().set({name:l,email:d,timestamp:(new Date).getTime()}).catch((function(e){console.error(e)})),o(""),f(""),s.current.value="",n.current.value="")},className:"p-3",children:[Object(O.jsxs)(E.a.Group,{className:"p-3",children:[Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)(E.a.Label,{children:"Name"}),Object(O.jsx)("p",{className:"text-danger",children:g})]}),Object(O.jsx)(E.a.Control,{className:"".concat(""===g?"":"is-invalid"),ref:s,type:"text",placeholder:"Name",onChange:function(e){return o(e.target.value)}})]}),Object(O.jsxs)(E.a.Group,{className:"p-3 pt-0",children:[Object(O.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(O.jsx)(E.a.Label,{children:"Email"}),Object(O.jsx)("p",{className:"text-danger",children:G})]}),Object(O.jsx)(E.a.Control,{className:"".concat(""===G?"":"is-invalid"),ref:n,type:"email",placeholder:"Email",onChange:function(e){return f(e.target.value)}})]}),Object(O.jsx)("div",{className:"d-flex p-3 justify-content-end",children:Object(O.jsx)(p.a,{type:"submit",className:"btn-success",children:Object(O.jsx)("i",{className:"fas fa-user-plus"})})})]})}),Object(O.jsxs)(I.a,{className:"mt-5 pb-3",children:[!c&&Object(O.jsx)("p",{className:"m-4 mb-0 text-muted",children:"Log in with Google to edit Contact List"}),Object(O.jsx)("div",{className:"m-4 mb-0 d-flex justify-content-end",children:Object(O.jsxs)(A.a,{as:N.a,children:[Object(O.jsxs)(p.a,{className:"btn-secondary btn-sm",onClick:function(){Y(!X)},children:[X&&Object(O.jsx)("i",{className:"fas fa-sort-up"}),!X&&Object(O.jsx)("i",{className:"fas fa-sort-down"})]}),Object(O.jsxs)(A.a.Toggle,{split:!0,variant:"info",children:["Sort ",Object(O.jsxs)("span",{className:"text-capitalize",children:[W," "]})]}),Object(O.jsxs)(A.a.Menu,{children:[Object(O.jsx)(A.a.Item,{onClick:function(){B("timestamp")},children:"Timestamp"}),Object(O.jsx)(A.a.Item,{onClick:function(){B("name")},children:"Name"}),Object(O.jsx)(A.a.Item,{onClick:function(){B("email")},children:"Email"})]})]})}),Object(O.jsx)("div",{className:"p-2",children:K})]})]})}var P=function(){return Object(O.jsx)(o.a,{children:Object(O.jsxs)(x,{children:[Object(O.jsx)(C,{}),Object(O.jsx)(G,{}),Object(O.jsx)(w.c,{children:Object(O.jsx)(w.a,{path:"/home",exact:!0})})]})})};n.a.render(Object(O.jsx)(P,{}),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.4f77fba5.chunk.js.map